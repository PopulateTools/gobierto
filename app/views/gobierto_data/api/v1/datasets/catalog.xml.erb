<?xml version="1.0" encoding="utf-8" ?>
<rdf:RDF
 xmlns:time="http://www.w3.org/2006/time#"
 xmlns:dct="http://purl.org/dc/terms/"
 xmlns:dcat="http://www.w3.org/ns/dcat#"
 xmlns:foaf="http://xmlns.com/foaf/0.1/"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
 <dcat:Catalog rdf:about="https://data.some.org/catalog">
   <dct:identifier><%= @identifier_uri %></dct:identifier>
   <dct:title><%= @catalog_title %></dct:title>
   <dct:description><%= @catalog_description %></dct:description>
   <dct:issued rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime"><%= @catalog_issued %></dct:issued>
   <dct:modified rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime"><%= @catalog_modified %></dct:modified>
   <%= @catalog_languages.map { |locale| "<dct:language>#{locale}</dct:language>" }.join.html_safe %>
   <foaf:homepage rdf:resource="<%= @catalog_homepage %>"/>
   <dct:license rdf:resource="<%= @catalog_license_url %>"/>
   <% @catalog_datasets.each do |dataset| %><dcat:dataset>
     <dcat:Dataset rdf:about="<%= dataset[:dataset_url]%>">
       <dct:identifier><%= dataset[:dataset_url] %></dct:identifier>
       <dct:title><%= dataset[:dataset_title] %></dct:title>
       <dct:description><%= dataset[:dataset_description] %></dct:description>
       <%= dataset[:dataset_keywords].map { |keyword| "<dct:keyword>#{locale}</dct:keyword>" }.join.html_safe %>
       <dct:issued rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime"><%= dataset[:dataset_issued] %></dct:issued>
       <dct:modified rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime"><%= dataset[:dataset_modified] %></dct:modified>
       <%= dataset[:dataset_languages].map { |lang| "<dct:language>#{lang}</dct:language>" }.join.html_safe %>
       <dct:license rdf:resource="<%= dataset[:dataset_title] %>"/>
       <dct:publisher>
         <foaf:Organization>
             <foaf:name><%= dataset[:dataset_publisher] %></foaf:name>
             <foaf:mbox><%= dataset[:dataset_publisher_mbox] %></foaf:mbox>
         </foaf:Organization>
       </dct:publisher>
       <% dataset[:dataset_distribution].each do |distribution| %>
       <dcat:distribution>
         <dcat:Distribution>
           <dct:identifier><%= @identifier_uri %></dct:identifier>
           <dct:title><%= dataset[:dataset_title] %> in CSV format</dct:title>
           <dct:description><%= dataset[:dataset_description] %></dct:description>
           <dcat:downloadURL rdf:datatype="http://www.w3.org/2001/XMLSchema#anyURI"><%= distribution[:download_url] %></dcat:downloadURL>
           <dcat:mediaType><%= distribution[:format] %></dcat:mediaType>
           <dct:license rdf:resource="<%= dataset[:dataset_title] %>"/>
         </dcat:Distribution>
       </dcat:distribution>
       <% end %>
     </dcat:Dataset>
   </dcat:dataset><% end %>
 </dcat:Catalog>
 </rdf:RDF>
